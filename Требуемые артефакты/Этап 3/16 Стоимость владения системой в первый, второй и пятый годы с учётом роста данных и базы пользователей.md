## 16. Стоимость владения системой (TCO)

### 16.1 Основные факторы стоимости

Стоимость владения системой формируется из следующих ключевых компонентов:

1. **Инфраструктура**
   - вычислительные ресурсы (Kubernetes-кластеры);
   - сетевой трафик;
   - CDN и edge-инфраструктура.

2. **Хранение данных**
   - транзакционные базы данных;
   - телеметрия и временные ряды;
   - аналитические хранилища и Data Lake.

3. **Интеграционные компоненты**
   - event streaming;
   - очереди сообщений;
   - API Gateway.

4. **Эксплуатация и поддержка**
   - DevOps / SRE;
   - мониторинг и observability;
   - CI/CD и безопасность.

5. **Рост нагрузки**
   - увеличение числа пользователей;
   - рост количества подключённых устройств;
   - увеличение глубины аналитики и ML.

---

### 16.2 Предположения для оценки

Для оценки стоимости используются следующие допущения:

| Параметр | Год 1 | Год 2 | Год 5 |
|--------|------|------|------|
| Активные пользователи (MAU) | ~100 тыс. | ~1 млн | ~10 млн |
| Подключённые устройства | ~50 тыс. | ~500 тыс. | ~5 млн |
| Объём телеметрии | ~5 ТБ | ~50 ТБ | ~500+ ТБ |
| Регионов развёртывания | 1–2 | 3–4 | 5+ |

---

### 16.3 Стоимость владения — Год 1 (MVP и ранний рост)

#### Основные статьи затрат
- один основной регион;
- минимальный набор сервисов;
- ограниченная аналитика;
- небольшая команда эксплуатации.

**Оценка затрат:**

| Категория | Доля затрат |
|---------|------------|
| Compute (K8s) | ~40% |
| Хранилища данных | ~25% |
| Event Bus / очереди | ~10% |
| CDN и трафик | ~10% |
| Observability и безопасность | ~10% |
| Прочее | ~5% |

**Характеристика года 1:**
- приоритет — скорость вывода на рынок;
- допускается некоторая избыточность;
- архитектура уже заложена «на рост».

---

### 16.4 Стоимость владения — Год 2 (активный рост)

#### Изменения по сравнению с годом 1
- рост пользовательской базы на порядок;
- подключение большего числа устройств;
- активное использование аналитики и рекомендаций;
- расширение географии.

**Дополнительные затраты:**
- увеличение ingestion-слоя;
- рост объёма хранилищ;
- дублирование инфраструктуры по регионам.

**Оценка распределения затрат:**

| Категория | Доля затрат |
|---------|------------|
| Compute (K8s) | ~35% |
| Хранилища и Data Lake | ~30% |
| Event Streaming | ~15% |
| Сеть и CDN | ~10% |
| Эксплуатация | ~10% |

**Характеристика года 2:**
- архитектура начинает «окупаться»;
- масштабирование происходит без рефакторинга;
- стоимость растёт линейно, а не скачкообразно.

---

### 16.5 Стоимость владения — Год 5 (глобальная платформа)

#### Ключевые особенности
- глобальная аудитория;
- большие объёмы исторических данных;
- развитые ML-модели;
- высокие требования к SLA.

**Основные драйверы стоимости:**
- хранение и обработка данных;
- межрегиональный трафик;
- эксплуатация multi-cloud.

**Оценка распределения затрат:**

| Категория | Доля затрат |
|---------|------------|
| Data Lake / Analytics | ~35% |
| Compute | ~30% |
| Event Streaming | ~15% |
| Сеть и CDN | ~10% |
| Эксплуатация и безопасность | ~10% |

**Характеристика года 5:**
- данные становятся главным активом;
- инфраструктура оптимизируется под аналитику;
- стоимость растёт медленнее, чем пользовательская база.

---

### 16.6 Влияние архитектуры на стоимость

Выбранная архитектура оказывает следующее влияние на TCO:

**Положительное:**
- отсутствие дорогостоящих миграций;
- независимое масштабирование компонентов;
- эффективное использование облачных ресурсов.

**Отрицательное:**
- более высокая стартовая сложность;
- дополнительные затраты на observability и SRE.

---

### 16.7 Выводы по стоимости владения

- архитектура экономически оправдана на горизонте 3–5 лет;
- первоначальные инвестиции компенсируются гибкостью и масштабируемостью;
- event-driven и microservice подходы снижают риски взрывного роста затрат;
- система готова к долгосрочной эволюции без радикальных переделок.

---
