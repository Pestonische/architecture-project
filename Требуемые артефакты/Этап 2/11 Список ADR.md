## 11. Список Architectural Decision Records (ADR)

### ADR-001. Выбор микросервисной архитектуры

**Суть решения**  
Система реализуется в виде набора независимых микросервисов, сгруппированных по доменам: тренировки, социальные функции, телеметрия, рекомендации, интеграция с магазином.

**Обоснование**  
Позволяет независимо развивать функциональность, масштабировать сервисы под разные нагрузки и поддерживать частые релизы.

**Связанные NFR**  
- 9.2 Масштабируемость  
- 9.3 Надёжность и доступность  
- 9.6 Развиваемость и поддерживаемость  

---

### ADR-002. Использование событийно-ориентированной архитектуры (Event-Driven)

**Суть решения**  
Взаимодействие между сервисами строится преимущественно на основе событий и асинхронных сообщений.

**Обоснование**  
Подходит для обработки телеметрии, аналитики, ML и промоакций без блокировки пользовательских сценариев.

**Связанные NFR**  
- 9.1 Производительность  
- 9.2 Масштабируемость  
- 9.3 Надёжность и доступность  

---

### ADR-003. API-first подход для внешних и внутренних интеграций

**Суть решения**  
Все сервисы предоставляют чётко описанные API (REST / gRPC), используемые как внутри системы, так и внешними потребителями.

**Обоснование**  
Обеспечивает единый контракт взаимодействия, упрощает интеграцию с торговыми приложениями и сторонними системами.

**Связанные NFR**  
- 9.6 Развиваемость и поддерживаемость  
- 9.5 Наблюдаемость  

---

### ADR-004. Интеграция с магазином через API и события без дублирования домена

**Суть решения**  
Коммерческая логика (каталог, цены, заказы) остаётся в специализированных торговых приложениях компании. Спортивное приложение интегрируется с ними через API и события.

**Обоснование**  
Позволяет стимулировать продажи, не усложняя ядро приложения и не снижая пользовательскую ценность.

**Связанные NFR**  
- 9.3 Надёжность и доступность  
- 9.4 Безопасность и приватность  
- 9.6 Развиваемость и поддерживаемость  

---

### ADR-005. Использование мультиоблачной инфраструктуры

**Суть решения**  
Система разворачивается в нескольких облачных провайдерах в зависимости от региональных и технических требований.

**Обоснование**  
Снижает vendor lock-in, повышает отказоустойчивость и позволяет оптимально размещать сервисы для глобальной аудитории.

**Связанные NFR**  
- 9.2 Масштабируемость  
- 9.3 Надёжность и доступность  

---

### ADR-006. Контейнеризация и оркестрация сервисов

**Суть решения**  
Все сервисы разворачиваются в контейнерах под управлением оркестратора (например, Kubernetes).

**Обоснование**  
Обеспечивает единый подход к деплою, масштабированию и восстановлению сервисов.

**Связанные NFR**  
- 9.2 Масштабируемость  
- 9.3 Надёжность и доступность  
- 9.6 Развиваемость и поддерживаемость  

---

### ADR-007. Централизованная observability (логи, метрики, трассировка)

**Суть решения**  
В системе внедряется централизованный сбор логов, метрик и распределённой трассировки.

**Обоснование**  
Необходимо для анализа инцидентов, контроля SLA и наблюдаемости в multi-cloud среде.

**Связанные NFR**  
- 9.5 Наблюдаемость  
- 9.3 Надёжность и доступность  

---

### ADR-008. Разделение потоков пользовательских и аналитических данных

**Суть решения**  
Потоки телеметрии и аналитики обрабатываются отдельно от пользовательских запросов.

**Обоснование**  
Позволяет избежать деградации пользовательского опыта при высокой аналитической нагрузке.

**Связанные NFR**  
- 9.1 Производительность  
- 9.2 Масштабируемость  

---

### ADR-009. Использование feature flags и zero-downtime deployments

**Суть решения**  
Внедрение feature-flag подхода и стратегий деплоя без простоя.

**Обоснование**  
Поддерживает быстрые эксперименты, A/B-тестирование и снижает риски релизов.

**Связанные NFR**  
- 9.3 Надёжность и доступность  
- 9.6 Развиваемость и поддерживаемость  

---

### ADR-010. Безопасность и минимизация хранения чувствительных данных

**Суть решения**  
Хранение и обработка персональных и медицинских данных минимизируется, используется шифрование и строгий контроль доступа.

**Обоснование**  
Снижение рисков утечек и соответствие регуляторным требованиям.

**Связанные NFR**  
- 9.4 Безопасность и приватность  

---

